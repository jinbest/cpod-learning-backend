webpackJsonp([1],{"3jCx":function(e,t){},"6oeV":function(e,t){},FNkf:function(e,t){},H97D:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"App"},r,!1,function(e){s("hF9T"),s("6oeV")},null,null).exports,o=s("/ocq"),a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{staticClass:"formLesson form-inline container",on:{submit:function(t){return t.preventDefault(),e.toUpload(t)}}},[s("p",{staticClass:"numberTitle mb-5 mt-5"},[e._v("Lesson Number")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.lessonNumber,expression:"lessonNumber"}],staticClass:"form-control mb-3",attrs:{type:"text",id:"lessonNumber"},domProps:{value:e.lessonNumber},on:{keyup:e.keyInput,input:function(t){t.target.composing||(e.lessonNumber=t.target.value)}}}),e._v(" "),s("button",{staticClass:"btn btn-primary btn-block submitBtn",attrs:{type:"submit",disabled:e.disabled}},[e._v("Submit")])])])},staticRenderFns:[]};var l=s("VU/8")({name:"UPLOAD-PANEL",data:function(){return{msg:"Welcome to ChinesePod Upload Panel",lessonNumber:"",disabled:!0}},methods:{toUpload:function(){this.$router.push("/upload-page/"+this.lessonNumber)},keyInput:function(){""==this.lessonNumber?this.disabled=!0:this.disabled=!1}}},a,!1,function(e){s("o0ZW")},"data-v-4c363ede",null).exports,u="",d={data:function(){return{options:{target:"/api/v1/recap/upload",testChunks:!1,headers:{"Access-Control-Allow-Origin":"*",Accept:"*/*"},processParams:function(){return{lessonId:u.$route.params.id}}},attrs:{accept:"image/*"},statusText:{success:"Success",error:"Error",uploading:"Uploading",paused:"Pause",waiting:"Waiting"},lessonNumber:""}},methods:{complete:function(){console.log("complete",arguments)},fileComplete:function(){console.log("file complete",arguments)}},mounted:function(){var e=this;this.$nextTick(function(){window.uploader=e.$refs.uploader.uploader})},created:function(){u=this,this.lessonNumber=this.$route.params.id}},p={render:function(){var e=this.$createElement;return(this._self._c||e)("uploader",{ref:"uploader",staticClass:"uploader container",attrs:{options:this.options,"file-status-text":this.statusText},on:{"file-complete":this.fileComplete,complete:this.complete}})},staticRenderFns:[]};var f=s("VU/8")(d,p,!1,function(e){s("3jCx")},null,null).exports;i.a.use(o.a);var c=new o.a({routes:[{path:"*",redirect:"/"},{path:"/",name:"UploadToLesson",component:l},{path:"/upload-page/:id",name:"UploadPage",component:f}]}),m=s("mtWM"),h=s.n(m),v=s("Rf8U"),g=s.n(v),_=s("bOdI"),y=s.n(_),b=s("7t+N"),C=s.n(b),S=s("kF/l"),x=s.n(S);function w(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}var U={inject:["uploader"]},E={data:function(){return{support:!0}},mounted:function(){this.support=this.uploader.uploader.support}},T={name:"uploader-btn",mixins:[U,E],props:{directory:{type:Boolean,default:!1},single:{type:Boolean,default:!1},attrs:{type:Object,default:function(){return{}}}},mounted:function(){var e=this;this.$nextTick(function(){e.uploader.uploader.assignBrowse(e.$refs.btn,e.directory,e.single,e.attrs)})}},N={render:function(){var e=this.$createElement;return(this._self._c||e)("label",{directives:[{name:"show",rawName:"v-show",value:this.support,expression:"support"}],ref:"btn",staticClass:"uploader-btn"},[this._t("default")],2)},staticRenderFns:[]};var k=s("VU/8")(T,N,!1,function(e){s("VB5X")},null,null).exports,A={name:"uploader-drop",mixins:[U,E],data:function(){return{dropClass:""}},methods:{onDragEnter:function(){this.dropClass="uploader-dragover"},onDragLeave:function(){this.dropClass=""},onDrop:function(){this.dropClass="uploader-droped"}},mounted:function(){var e=this;this.$nextTick(function(){var t=e.$refs.drop,s=e.uploader.uploader;s.assignDrop(t),s.on("dragenter",e.onDragEnter),s.on("dragleave",e.onDragLeave),s.on("drop",e.onDrop)})},beforeDestroy:function(){var e=this.$refs.drop,t=this.uploader.uploader;t.off("dragenter",this.onDragEnter),t.off("dragleave",this.onDragLeave),t.off("drop",this.onDrop),t.unAssignDrop(e)}},F={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:this.support,expression:"support"}],ref:"drop",staticClass:"uploader-drop",class:this.dropClass},[this._t("default")],2)},staticRenderFns:[]};var R=s("VU/8")(A,F,!1,function(e){s("RSq6")},null,null).exports,L={name:"uploader-unsupport",mixins:[U,E]},$={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:!this.support,expression:"!support"}],staticClass:"uploader-unsupport"},[this._t("default",[this._m(0)])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n      Your browser, unfortunately, is not supported by Uploader.js. The library requires support for "),t("a",{attrs:{href:"http://www.w3.org/TR/FileAPI/"}},[this._v("the HTML5 File API")]),this._v(" along with "),t("a",{attrs:{href:"http://www.w3.org/TR/FileAPI/#normalization-of-params"}},[this._v("file slicing")]),this._v(".\n    ")])}]};var M=s("VU/8")(L,$,!1,function(e){s("k6xS")},null,null).exports,P=s("fZjL"),z=s.n(P),D=["fileProgress","fileSuccess","fileComplete","fileError"],j={name:"uploader-file",props:{file:{type:Object,default:function(){return{}}},list:{type:Boolean,default:!1}},data:function(){return{response:null,paused:!1,error:!1,averageSpeed:0,currentSpeed:0,isComplete:!1,isUploading:!1,size:0,formatedSize:"",uploadedSize:0,progress:0,timeRemaining:0,type:"",extension:"",progressingClass:""}},computed:{fileCategory:function(){var e=this.extension,t=this.file.isFolder?"folder":"unknown",s=this.file.uploader.opts.categoryMap||{image:["gif","jpg","jpeg","png","bmp","webp"],video:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],audio:["mp3","wav","wma","ogg","aac","flac"],document:["doc","txt","docx","pages","epub","pdf","numbers","csv","xls","xlsx","keynote","ppt","pptx"]};return z()(s).forEach(function(i){s[i].indexOf(e)>-1&&(t=i)}),t},progressStyle:function(){var e=Math.floor(100*this.progress),t="translateX("+Math.floor(e-100)+"%)";return{progress:e+"%",webkitTransform:t,mozTransform:t,msTransform:t,transform:t}},formatedAverageSpeed:function(){return x.a.utils.formatSize(this.averageSpeed)+" / s"},status:function(){var e=this.isUploading,t=this.isComplete,s=this.error,i=this.paused;return t?"success":s?"error":e?"uploading":i?"paused":"waiting"},statusText:function(){var e=this.status,t=this.file.uploader.fileStatusText;return("function"==typeof t?t(e,this.response):t[e])||e},formatedTimeRemaining:function(){var e=this.timeRemaining,t=this.file;if(e===Number.POSITIVE_INFINITY||0===e)return"";var s=function(e){var t=Math.floor(e/31536e3);if(t)return t+" year"+o(t);var s=Math.floor((e%=31536e3)/86400);if(s)return s+" day"+o(s);var i=Math.floor((e%=86400)/3600);if(i)return i+" hour"+o(i);var r=Math.floor((e%=3600)/60);if(r)return r+" minute"+o(r);var n=e%60;return n+" second"+o(n);function o(e){return e>1?"s":""}}(e),i=t.uploader.opts.parseTimeRemaining;return i&&(s=i(e,s)),s}},watch:{status:function(e,t){var s=this;t&&"uploading"===e&&"uploading"!==t?this.tid=setTimeout(function(){s.progressingClass="uploader-file-progressing"},200):(clearTimeout(this.tid),this.progressingClass="")}},methods:{_actionCheck:function(){this.paused=this.file.paused,this.error=this.file.error,this.isUploading=this.file.isUploading()},pause:function(){this.file.pause(),this._actionCheck(),this._fileProgress()},resume:function(){this.file.resume(),this._actionCheck()},remove:function(){this.file.cancel()},retry:function(){this.file.retry(),this._actionCheck()},processResponse:function(e){var t=e;try{t=JSON.parse(e)}catch(e){}this.response=t},fileEventsHandler:function(e,t){var s=t[0],i=t[1],r=this.list?s:i;if(this.file===r){if(this.list&&"fileSuccess"===e)return void this.processResponse(t[2]);this["_"+e].apply(this,t)}},_fileProgress:function(){this.progress=this.file.progress(),this.averageSpeed=this.file.averageSpeed,this.currentSpeed=this.file.currentSpeed,this.timeRemaining=this.file.timeRemaining(),this.uploadedSize=this.file.sizeUploaded(),this._actionCheck()},_fileSuccess:function(e,t,s){e&&this.processResponse(s),this._fileProgress(),this.error=!1,this.isComplete=!0,this.isUploading=!1},_fileComplete:function(){this._fileSuccess()},_fileError:function(e,t,s){this._fileProgress(),this.processResponse(s),this.error=!0,this.isComplete=!1,this.isUploading=!1}},mounted:function(){var e=this;["paused","error","averageSpeed","currentSpeed"].forEach(function(t){e[t]=e.file[t]}),["isComplete","isUploading",{key:"size",fn:"getSize"},{key:"formatedSize",fn:"getFormatSize"},{key:"uploadedSize",fn:"sizeUploaded"},"progress","timeRemaining",{key:"type",fn:"getType"},{key:"extension",fn:"getExtension"}].forEach(function(t){"string"==typeof t?e[t]=e.file[t]():e[t.key]=e.file[t.fn]()});var t=this._handlers={};D.forEach(function(s){e.file.uploader.on(s,function(s){return t[s]=function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];e.fileEventsHandler(s,i)},t[s]}(s))})},destroyed:function(){var e=this;D.forEach(function(t){e.file.uploader.off(t,e._handlers[t])}),this._handlers=null}},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"uploader-file",attrs:{status:e.status}},[e._t("default",[s("div",{staticClass:"uploader-file-progress",class:e.progressingClass,style:e.progressStyle}),e._v(" "),s("div",{staticClass:"uploader-file-info"},[s("div",{staticClass:"uploader-file-name"},[s("i",{staticClass:"uploader-file-icon",attrs:{icon:e.fileCategory}}),e._v(e._s(e.file.name))]),e._v(" "),s("div",{staticClass:"uploader-file-size"},[e._v(e._s(e.formatedSize))]),e._v(" "),s("div",{staticClass:"uploader-file-meta"}),e._v(" "),s("div",{staticClass:"uploader-file-status"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"uploading"!==e.status,expression:"status !== 'uploading'"}]},[e._v(e._s(e.statusText))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"uploading"===e.status,expression:"status === 'uploading'"}]},[s("span",[e._v(e._s(e.progressStyle.progress))]),e._v(" "),s("em",[e._v(e._s(e.formatedAverageSpeed))]),e._v(" "),s("i",[e._v(e._s(e.formatedTimeRemaining))])])]),e._v(" "),s("div",{staticClass:"uploader-file-actions"},[s("span",{staticClass:"uploader-file-pause",on:{click:e.pause}}),e._v(" "),s("span",{staticClass:"uploader-file-resume",on:{click:e.resume}},[e._v("️")]),e._v(" "),s("span",{staticClass:"uploader-file-retry",on:{click:e.retry}}),e._v(" "),s("span",{staticClass:"uploader-file-remove",on:{click:e.remove}})])])],{file:e.file,list:e.list,status:e.status,paused:e.paused,error:e.error,response:e.response,averageSpeed:e.averageSpeed,formatedAverageSpeed:e.formatedAverageSpeed,currentSpeed:e.currentSpeed,isComplete:e.isComplete,isUploading:e.isUploading,size:e.size,formatedSize:e.formatedSize,uploadedSize:e.uploadedSize,progress:e.progress,progressStyle:e.progressStyle,progressingClass:e.progressingClass,timeRemaining:e.timeRemaining,formatedTimeRemaining:e.formatedTimeRemaining,type:e.type,extension:e.extension,fileCategory:e.fileCategory})],2)},staticRenderFns:[]};var V=s("VU/8")(j,I,!1,function(e){s("H97D")},null,null).exports,O={name:"uploader-list",mixins:[U],computed:{fileList:function(){return this.uploader.fileList}},components:{UploaderFile:V}},B={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uploader-list"},[this._t("default",[t("ul",this._l(this.fileList,function(e){return t("li",{key:e.id},[t("uploader-file",{attrs:{file:e,list:!0}})],1)}),0)],{fileList:this.fileList})],2)},staticRenderFns:[]};var W=s("VU/8")(O,B,!1,function(e){s("FNkf")},null,null).exports,H={name:"uploader-files",mixins:[U],computed:{files:function(){return this.uploader.files}},components:{UploaderFile:V}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uploader-files"},[this._t("default",[t("ul",this._l(this.files,function(e){return t("li",{key:e.id},[t("uploader-file",{attrs:{file:e}})],1)}),0)],{files:this.files})],2)},staticRenderFns:[]};var Z=s("VU/8")(H,q,!1,function(e){s("jtPr")},null,null).exports,J={name:"uploader",provide:function(){return{uploader:this}},props:{options:{type:Object,default:function(){return{}}},autoStart:{type:Boolean,default:!0},fileStatusText:{type:[Object,Function],default:function(){return{success:"success",error:"error",uploading:"uploading",paused:"paused",waiting:"waiting"}}}},data:function(){return{started:!1,files:[],fileList:[],lessonNumber:"",verifyErrorText:"",fileName:""}},methods:{verifyFile:function(e){var t=e.split("."),s=t.length-1,i=t[s];return this.verifyUploadName(t,s,i,this.lessonNumber)},uploadStart:function(){this.started=!0,this.verifyErrorText&&C()("#errorModal").modal("show")},fileAdded:function(e){var t=this.verifyFile(e.name);if(this.fileName=e.name,t&&(this.verifyErrorText=t,e.ignored=!0),this.$emit(w("fileAdded"),e),e.ignored)return!1},filesAdded:function(e,t){e.length>0&&(this.verifyErrorText="");if(e.length>1)for(var s=0;s<e.length;s++){var i=this.verifyFile(e[s].name);i&&(e[s].ignored=!0,this.fileName=this.fileName+e[s].name+" ; ",this.verifyErrorText=this.verifyErrorText+"("+e[s].name+") "+i+" ; ")}else if(e.length>0){this.verifyFile(e[0].name)&&(e[0].ignored=!0,this.fileName=e[0].name,this.verifyErrorText=this.verifyFile(e[0].name))}if(this.$emit(w("filesAdded"),e,t),e.ignored||t.ignored)return!1},fileRemoved:function(e){this.files=this.uploader.files,this.fileList=this.uploader.fileList},filesSubmitted:function(e,t){this.files=this.uploader.files,this.fileList=this.uploader.fileList,this.autoStart&&this.uploader.upload()},allEvent:function(){for(var e,t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];var r=s[0],n=(e={},y()(e,"fileAdded",!0),y()(e,"filesAdded",!0),y()(e,"uploadStart","uploadStart"),e)[r];if(n){if(!0===n)return;this[n].apply(this,s.slice(1))}s[0]=w(r),this.$emit.apply(this,s)},verifyUploadName:function(e,t,s,i){if("jpg"!=s&&"wav"!=s&&"mp3"!=s)return"The file type is not valid, accept jpg, wav, mp3.";if(t<2)return"The file name is not valid.";if(e[0]!=i)return"The file name does not correspond to lesson "+i+".";if("jpg"==s)if("background"==e[1]){if(3!=t)return"Background image file name does not comply with spec, use "+e[0]+"background.[sp|tl|tp|sl]"+s+".";if("sl"!=e[2]&&"sp"!=e[2]&&"tl"!=e[2]&&"tp"!=e[2])return"Error: Category must be one of the following: sp, sl, tp, tl, example: 4123.3.0032.sl."}else{if(4==t&&"sl"!=e[3]&&"sp"!=e[3]&&"tl"!=e[3]&&"tp"!=e[3])return"Error: Category must be one of the following: sp, sl, tp, tl, example: 4123.3.0032.sl.";if(4==t){if(4!=e[2].length||isNaN(e[2]))return"Error: Length must be 4 numeric digits MMSS.";if(!/^\d+$/.test(e[2])&&(e[2][1]>5||e[2][3]>5))return"Error: Invalid Offset - must be 4 digits from 0-9 in format MMSS (MM=Minutes, SS=Seconds - example 0032 for 0 Minutes, 32 seconds."}else{if(3!=t)return"Image file name does not comply with spec, use "+e[0]+"."+s+".";if(4!=e[1].length||isNaN(e[1]))return"Error: Length must be 4 numeric digits MMSS.";if("0000"!=e[1])return"Image file name does not comply with spec, use "+e[1]+"."+s+"."}}if("wav"==s||"mp3"==s){if(2!=t&&3!=t)return"Audio file name does not comply with spec, use "+e[0]+"."+s+".";if(3==t&&"0000"!=e[2])return"Audio file name does not comply with spec, use "+e[1]+"."+s+"."}}},created:function(){this.options.initialPaused=!this.autoStart;var e=new x.a(this.options);this.uploader=e,this.uploader.fileStatusText=this.fileStatusText,e.on("catchAll",this.allEvent),e.on("fileAdded",this.fileAdded),e.on("filesAdded",this.filesAdded),e.on("fileRemoved",this.fileRemoved),e.on("filesSubmitted",this.filesSubmitted),this.lessonNumber=this.$route.params.id},destroyed:function(){var e=this.uploader;e.off("catchAll",this.allEvent),e.off("fileAdded",this.fileAdded),e.off("filesAdded",this.filesAdded),e.off("fileRemoved",this.fileRemoved),e.off("filesSubmitted",this.filesSubmitted),this.uploader=null},components:{UploaderBtn:k,UploaderDrop:R,UploaderUnsupport:M,UploaderList:W,UploaderFiles:Z,UploaderFile:V}},X={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"uploadPageTitle mb-5 mt-5"},[e._v("Lesson "+e._s(e.lessonNumber))]),e._v(" "),e._t("default",[s("uploader-unsupport"),e._v(" "),s("uploader-drop",{on:{ondragenter:function(t){e.document.getElementsByClassName("overlay").toggle("overlay_show")}}},[s("div",{staticClass:"uploadContainer mt-4"},[s("i",{staticClass:"fas fa-cloud-upload-alt uploadIcon"}),e._v(" "),s("div",{staticClass:"uploadPageDescription"},[s("div",[e._v("Drag & Drop your files to upload")]),e._v(" "),s("div",[e._v("OR")]),e._v(" "),s("div",{staticClass:"filesAndFolderText"},[s("uploader-btn",[s("a",[e._v("File")])]),e._v(" / \n          "),s("uploader-btn",{attrs:{directory:!0}},[s("a",[e._v("Folder")])])],1)])]),e._v(" "),s("div",{staticClass:"overlay"})]),e._v(" "),s("uploader-list")],{files:e.files,fileList:e.fileList,started:e.started}),e._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"errorModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"mb-2 fileName"},[e._v("File : "+e._s(e.fileName))]),e._v(" "),s("div",{staticClass:"verifyErrorText"},[e._v(e._s(e.verifyErrorText))])]),e._v(" "),e._m(1)])])])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("i",{staticClass:"fas fa-exclamation-triangle errorIcon"}),this._v(" "),t("h5",{staticClass:"modal-title ml-2",attrs:{id:"exampleModalLabel"}},[this._v("Error")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-secondary okBtn",attrs:{type:"button","data-dismiss":"modal"}},[this._v("OK")])])}]};var K=s("VU/8")(J,X,!1,function(e){s("jWuc")},null,null).exports,Y={install:Q,Uploader:K,UploaderBtn:k,UploaderDrop:R,UploaderUnsupport:M,UploaderList:W,UploaderFiles:Z,UploaderFile:V};"undefined"!=typeof window&&window.Vue&&window.Vue.use(Q);var G=Y;function Q(e){Q.installed||(e.component(K.name,K),e.component(k.name,k),e.component(W.name,W),e.component(Z.name,Z),e.component(V.name,V))}s("K3J8");i.a.use(G),i.a.use(g.a,h.a),i.a.config.productionTip=!1,new i.a({el:"#app",router:c,components:{App:n},template:"<App/>"})},RSq6:function(e,t){},VB5X:function(e,t){},hF9T:function(e,t){},jWuc:function(e,t){},jtPr:function(e,t){},k6xS:function(e,t){},o0ZW:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.07f9b09286a35c182827.js.map