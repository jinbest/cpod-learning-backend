webpackJsonp([1],{"1vG6":function(e,t){},"2Em+":function(e,t){},FNkf:function(e,t){},MLrP:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),n=s("mvHQ"),o=s.n(n),r=s("woOf"),a=s.n(r),l={name:"App",created:function(){var e=this;sessionStorage.getItem("store")&&this.$store.replaceState(a()({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",function(){sessionStorage.setItem("store",o()(e.$store.state))});var t=this.$store.state.API.getToken.url,s=this.$store.state.API.getToken.parameter,i=this;"bearer "!=i.$http.defaults.headers.common.Authorization&&""!=i.$http.defaults.headers.common.Authorization||this.$http.post(t,s,{headers:{"Content-Type":"application/json"},withCredentials:!0}).then(function(e){if(e.data){console.log("Get token:"+o()(e.data)),i.$store.state.Authorization.bearerToken="bearer "+e.data.token;var t=i.$store.state.Authorization.bearerToken;i.$store.state.Authorization.userId=e.data.userId,i.$http.defaults.headers.common.Authorization=t}}).catch(function(e){console.log(e),window.location.href="/login"})}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var d=s("VU/8")(l,u,!1,function(e){s("vRiw"),s("q/W4")},null,null).exports,p=s("/ocq"),c={name:"UPLOAD-PANEL",data:function(){return{msg:"Welcome to ChinesePod Upload Panel",lessonNumber:"",disabled:!0,userEmail:"",assignedLessons:[],haveLessonLink:!0,isLoading:!1,submitSuccess:!1}},methods:{clickSubmit:function(){var e=this;this.isLoading=!0,this.currentLesson=this.lessonNumber.toUpperCase();var t=this.$store.state.API.getLessonUploadedContent.url+this.lessonNumber;this.$http.get(t).then(function(t){t.data&&(console.log(t.data),e.$store.state.currentLesson=e.currentLesson,e.$store.state.userFiles=t.data,e.$router.push("/upload-page/"+e.currentLesson))}).catch(function(t){e.submitSuccess=!0,e.isLoading=!1})},keyInput:function(){this.submitDisabled()},submitDisabled:function(){""==this.lessonNumber?this.disabled=!0:this.disabled=!1},clickLessonNumber:function(e){1==this.haveLessonLink&&(this.lessonNumber=e),this.submitDisabled()}},created:function(){this.$store.state.uploadCompleted=!1;var e=this.$route.path;if(this.userEmail=e.split("+")[1],void 0==e.split("+")[2])this.assignedLessons.push("ANY lessons"),this.haveLessonLink=!1;else if("none"==e.split("+")[2])this.assignedLessons.push("Is no longer authorized"),this.haveLessonLink=!1;else for(var t=2;t<=e.length;t++)this.assignedLessons.push(e.split("+")[t]),this.haveLessonLink=!0}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{staticClass:"formLesson form-inline container",on:{submit:function(t){return t.preventDefault(),e.clickSubmit()}}},[s("div",{staticClass:"userEmail mt-5"},[e._v("Welcone Back, "+e._s(e.userEmail))]),e._v(" "),s("div",{staticClass:"asssignedLessons mt-4"},[e._v("Assigned Lessons: ")]),e._v(" "),e._l(e.assignedLessons,function(t){return s("div",{key:t,staticClass:"lessonNumber"},[s("span",{class:{lessonNumberList:e.haveLessonLink},on:{click:function(s){return e.clickLessonNumber(t)}}},[e._v(e._s(t))])])}),e._v(" "),s("div",{staticClass:"mt-4 enterLessonNumber"},[e._v("Please enter lesson to submit: \n      "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.lessonNumber,expression:"lessonNumber"}],staticClass:"mb-3 form-control",attrs:{type:"text",id:"lessonNumber"},domProps:{value:e.lessonNumber},on:{keyup:e.keyInput,input:function(t){t.target.composing||(e.lessonNumber=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"mt-3"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"submit",disabled:e.disabled}},[e._v("Submit")]),e._v(" "),e.submitSuccess?s("span",{staticClass:"ml-2",staticStyle:{color:"red"}},[e._v("No lesson found.")]):e._e()]),e._v(" "),s("loading",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}})],2)])},staticRenderFns:[]};var h=s("VU/8")(c,f,!1,function(e){s("2Em+")},"data-v-ed18d7a2",null).exports,m="",v={data:function(){return{options:{target:"https://www.chinesepod.com/api/v1/recap/upload",testChunks:!1,processParams:function(){return{lessonId:m.$route.params.id}}},attrs:{accept:"image/*"},statusText:{success:"Success",error:"Error",uploading:"Uploading",paused:"Pause",waiting:"Waiting"},lessonNumber:""}},methods:{complete:function(){this.$store.state.submitButtonDisabled=!1,console.log("complete",arguments)},fileComplete:function(){console.log("file complete",arguments)}},mounted:function(){var e=this;this.$nextTick(function(){window.uploader=e.$refs.uploader.uploader})},created:function(){m=this,this.lessonNumber=this.$route.params.id}},g={render:function(){var e=this.$createElement;return(this._self._c||e)("uploader",{ref:"uploader",staticClass:"uploader container",attrs:{options:this.options,"file-status-text":this.statusText},on:{"file-complete":this.fileComplete,complete:this.complete}})},staticRenderFns:[]};var b=s("VU/8")(v,g,!1,function(e){s("kNIQ")},null,null).exports,_={name:"SUBMISSION-RECEIVED",data:function(){return{slidesNumber:0}},methods:{},created:function(){var e=this;this.slidesNumber=this.$store.state.slidesNumber,sessionStorage.getItem("store")&&this.$store.replaceState(a()({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",function(){sessionStorage.setItem("store",o()(e.$store.state))})}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ml-5"},[t("div",{staticClass:"SubmissionTitle mt-5"},[this._v("Submission Received")]),this._v(" "),t("div",{staticClass:"asssignedLessons mt-4"},[this._v(this._s(this.slidesNumber)+" Slides received, complete in 4 versions No consistency errors detected.")])])},staticRenderFns:[]};var S=s("VU/8")(_,y,!1,function(e){s("MLrP")},"data-v-af4ca962",null).exports;i.a.use(p.a);var C=new p.a({base:"/recap/upload-files",routes:[{path:"/",name:"lessonNumber",component:h,alias:"/authorize+*"},{path:"/upload-page/:id",name:"UploadPage",component:b},{path:"/submission-received",name:"submissionReceived",component:S}]}),L=s("mtWM"),N=s.n(L),w=s("Rf8U"),E=s.n(w),T=s("BO1k"),k=s.n(T),x=s("fZjL"),$=s.n(x),U=s("bOdI"),I=s.n(U),A=s("7t+N"),F=s.n(A),M=s("kF/l"),P=s.n(M);function R(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}var O={inject:["uploader"]},z={data:function(){return{support:!0}},mounted:function(){this.support=this.uploader.uploader.support}},D={name:"uploader-btn",mixins:[O,z],props:{directory:{type:Boolean,default:!1},single:{type:Boolean,default:!1},attrs:{type:Object,default:function(){return{}}}},mounted:function(){var e=this;this.$nextTick(function(){e.uploader.uploader.assignBrowse(e.$refs.btn,e.directory,e.single,e.attrs)})}},j={render:function(){var e=this.$createElement;return(this._self._c||e)("label",{directives:[{name:"show",rawName:"v-show",value:this.support,expression:"support"}],ref:"btn",staticClass:"uploader-btn"},[this._t("default")],2)},staticRenderFns:[]};var B=s("VU/8")(D,j,!1,function(e){s("VB5X")},null,null).exports,V={name:"uploader-drop",mixins:[O,z],data:function(){return{dropClass:""}},methods:{onDragEnter:function(){this.dropClass="uploader-dragover"},onDragLeave:function(){this.dropClass=""},onDrop:function(){this.dropClass="uploader-droped"}},mounted:function(){var e=this;this.$nextTick(function(){var t=e.$refs.drop,s=e.uploader.uploader;s.assignDrop(t),s.on("dragenter",e.onDragEnter),s.on("dragleave",e.onDragLeave),s.on("drop",e.onDrop)})},beforeDestroy:function(){var e=this.$refs.drop,t=this.uploader.uploader;t.off("dragenter",this.onDragEnter),t.off("dragleave",this.onDragLeave),t.off("drop",this.onDrop),t.unAssignDrop(e)}},W={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:this.support,expression:"support"}],ref:"drop",staticClass:"uploader-drop",class:this.dropClass},[this._t("default")],2)},staticRenderFns:[]};var J=s("VU/8")(V,W,!1,function(e){s("SjJI")},null,null).exports,Y={name:"uploader-unsupport",mixins:[O,z]},G={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:!this.support,expression:"!support"}],staticClass:"uploader-unsupport"},[this._t("default",[this._m(0)])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("\n      Your browser, unfortunately, is not supported by Uploader.js. The library requires support for "),t("a",{attrs:{href:"http://www.w3.org/TR/FileAPI/"}},[this._v("the HTML5 File API")]),this._v(" along with "),t("a",{attrs:{href:"http://www.w3.org/TR/FileAPI/#normalization-of-params"}},[this._v("file slicing")]),this._v(".\n    ")])}]};var H=s("VU/8")(Y,G,!1,function(e){s("k6xS")},null,null).exports,q=["fileProgress","fileSuccess","fileComplete","fileError"],K={name:"uploader-file",props:{file:{type:Object,default:function(){return{}}},list:{type:Boolean,default:!1}},data:function(){return{response:null,paused:!1,error:!1,averageSpeed:0,currentSpeed:0,isComplete:!1,isUploading:!1,size:0,formatedSize:"",uploadedSize:0,progress:0,timeRemaining:0,type:"",extension:"",progressingClass:""}},computed:{fileCategory:function(){var e=this.extension,t=this.file.isFolder?"folder":"unknown",s=this.file.uploader.opts.categoryMap||{image:["gif","jpg","jpeg","png","bmp","webp"],video:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],audio:["mp3","wav","wma","ogg","aac","flac"],document:["doc","txt","docx","pages","epub","pdf","numbers","csv","xls","xlsx","keynote","ppt","pptx"]};return $()(s).forEach(function(i){s[i].indexOf(e)>-1&&(t=i)}),t},progressStyle:function(){var e=Math.floor(100*this.progress),t="translateX("+Math.floor(e-100)+"%)";return{progress:e+"%",webkitTransform:t,mozTransform:t,msTransform:t,transform:t}},formatedAverageSpeed:function(){return P.a.utils.formatSize(this.averageSpeed)+" / s"},status:function(){var e=this.isUploading,t=this.isComplete,s=this.error,i=this.paused;return t?"success":s?"error":e?"uploading":i?"paused":"waiting"},statusText:function(){var e=this.status,t=this.file.uploader.fileStatusText;return("function"==typeof t?t(e,this.response):t[e])||e},formatedTimeRemaining:function(){var e=this.timeRemaining,t=this.file;if(e===Number.POSITIVE_INFINITY||0===e)return"";var s=function(e){var t=Math.floor(e/31536e3);if(t)return t+" year"+r(t);var s=Math.floor((e%=31536e3)/86400);if(s)return s+" day"+r(s);var i=Math.floor((e%=86400)/3600);if(i)return i+" hour"+r(i);var n=Math.floor((e%=3600)/60);if(n)return n+" minute"+r(n);var o=e%60;return o+" second"+r(o);function r(e){return e>1?"s":""}}(e),i=t.uploader.opts.parseTimeRemaining;return i&&(s=i(e,s)),s}},watch:{status:function(e,t){var s=this;t&&"uploading"===e&&"uploading"!==t?this.tid=setTimeout(function(){s.progressingClass="uploader-file-progressing"},200):(clearTimeout(this.tid),this.progressingClass="")}},methods:{_actionCheck:function(){this.paused=this.file.paused,this.error=this.file.error,this.isUploading=this.file.isUploading()},pause:function(){this.file.pause(),this._actionCheck(),this._fileProgress()},resume:function(){this.file.resume(),this._actionCheck()},remove:function(){this.file.cancel()},retry:function(){this.file.retry(),this._actionCheck()},processResponse:function(e){var t=e;try{t=JSON.parse(e)}catch(e){}this.response=t},fileEventsHandler:function(e,t){var s=t[0],i=t[1],n=this.list?s:i;if(this.file===n){if(this.list&&"fileSuccess"===e)return void this.processResponse(t[2]);this["_"+e].apply(this,t)}},_fileProgress:function(){this.progress=this.file.progress(),this.averageSpeed=this.file.averageSpeed,this.currentSpeed=this.file.currentSpeed,this.timeRemaining=this.file.timeRemaining(),this.uploadedSize=this.file.sizeUploaded(),this._actionCheck()},_fileSuccess:function(e,t,s){e&&this.processResponse(s),this._fileProgress(),this.error=!1,this.isComplete=!0,this.isUploading=!1},_fileComplete:function(){this._fileSuccess()},_fileError:function(e,t,s){this._fileProgress(),this.processResponse(s),this.error=!0,this.isComplete=!1,this.isUploading=!1}},mounted:function(){var e=this;["paused","error","averageSpeed","currentSpeed"].forEach(function(t){e[t]=e.file[t]}),["isComplete","isUploading",{key:"size",fn:"getSize"},{key:"formatedSize",fn:"getFormatSize"},{key:"uploadedSize",fn:"sizeUploaded"},"progress","timeRemaining",{key:"type",fn:"getType"},{key:"extension",fn:"getExtension"}].forEach(function(t){"string"==typeof t?e[t]=e.file[t]():e[t.key]=e.file[t.fn]()});var t=this._handlers={};q.forEach(function(s){e.file.uploader.on(s,function(s){return t[s]=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];e.fileEventsHandler(s,i)},t[s]}(s))})},destroyed:function(){var e=this;q.forEach(function(t){e.file.uploader.off(t,e._handlers[t])}),this._handlers=null}},Z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"uploader-file",attrs:{status:e.status}},[e._t("default",[s("div",{staticClass:"uploader-file-progress",class:e.progressingClass,style:e.progressStyle}),e._v(" "),s("div",{staticClass:"uploader-file-info"},[s("div",{staticClass:"uploader-file-name"},[s("i",{staticClass:"uploader-file-icon",attrs:{icon:e.fileCategory}}),e._v(e._s(e.file.name))]),e._v(" "),s("div",{staticClass:"uploader-file-size"},[e._v(e._s(e.formatedSize))]),e._v(" "),s("div",{staticClass:"uploader-file-meta"}),e._v(" "),s("div",{staticClass:"uploader-file-status"},[s("span",{directives:[{name:"show",rawName:"v-show",value:"uploading"!==e.status,expression:"status !== 'uploading'"}]},[e._v(e._s(e.statusText))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"uploading"===e.status,expression:"status === 'uploading'"}]},[s("span",[e._v(e._s(e.progressStyle.progress))]),e._v(" "),s("em",[e._v(e._s(e.formatedAverageSpeed))]),e._v(" "),s("i",[e._v(e._s(e.formatedTimeRemaining))])])]),e._v(" "),s("div",{staticClass:"uploader-file-actions"},[s("span",{staticClass:"uploader-file-pause",on:{click:e.pause}}),e._v(" "),s("span",{staticClass:"uploader-file-resume",on:{click:e.resume}},[e._v("️")]),e._v(" "),s("span",{staticClass:"uploader-file-retry",on:{click:e.retry}}),e._v(" "),s("span",{staticClass:"uploader-file-remove",on:{click:e.remove}})])])],{file:e.file,list:e.list,status:e.status,paused:e.paused,error:e.error,response:e.response,averageSpeed:e.averageSpeed,formatedAverageSpeed:e.formatedAverageSpeed,currentSpeed:e.currentSpeed,isComplete:e.isComplete,isUploading:e.isUploading,size:e.size,formatedSize:e.formatedSize,uploadedSize:e.uploadedSize,progress:e.progress,progressStyle:e.progressStyle,progressingClass:e.progressingClass,timeRemaining:e.timeRemaining,formatedTimeRemaining:e.formatedTimeRemaining,type:e.type,extension:e.extension,fileCategory:e.fileCategory})],2)},staticRenderFns:[]};var Q=s("VU/8")(K,Z,!1,function(e){s("uLrf")},null,null).exports,X={name:"uploader-list",mixins:[O],computed:{fileList:function(){return this.uploader.fileList}},components:{UploaderFile:Q}},ee={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uploader-list"},[this._t("default",[t("ul",this._l(this.fileList,function(e){return t("li",{key:e.id},[t("uploader-file",{attrs:{file:e,list:!0}})],1)}),0)],{fileList:this.fileList})],2)},staticRenderFns:[]};var te=s("VU/8")(X,ee,!1,function(e){s("FNkf")},null,null).exports,se={name:"uploader-files",mixins:[O],computed:{files:function(){return this.uploader.files}},components:{UploaderFile:Q}},ie={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"uploader-files"},[this._t("default",[t("ul",this._l(this.files,function(e){return t("li",{key:e.id},[t("uploader-file",{attrs:{file:e}})],1)}),0)],{files:this.files})],2)},staticRenderFns:[]};var ne=s("VU/8")(se,ie,!1,function(e){s("jtPr")},null,null).exports,oe={name:"uploader",provide:function(){return{uploader:this}},props:{options:{type:Object,default:function(){return{}}},autoStart:{type:Boolean,default:!0},fileStatusText:{type:[Object,Function],default:function(){return{success:"success",error:"error",uploading:"uploading",paused:"paused",waiting:"waiting"}}}},data:function(){return{started:!1,files:[],fileList:[],lessonNumber:"",verifyErros:[],submitEnable:!1,remindMsg:"",slidesNumber:0,allUploadFinished:!1,userFiles:[],uploadedListTitle:"",lessonTitle:"",MissingFiles:[],MissingFileTitle:"",isLoading:!1,errorModalMsg:[]}},methods:{splitFileName:function(e){var t=e.split("."),s=t.length-1;return{splitted:t,numGroup:s,extension:t[s]}},verifyFile:function(e){var t=this.splitFileName(e);return this.verifyUploadName(t.splitted,t.numGroup,t.extension,this.lessonNumber)},uploadStart:function(){this.started=!0},fileAdded:function(e){this.$store.state.submitButtonDisabled=!0;var t=this.verifyFile(e.name);if(t)this.verifyErros.push("("+e.name+") "+t+" ; "),e.ignored=!0;else{var s=this.fileList.length<=0?1:this.fileList.length;this.updateSubmitEnable(s)}if(this.$emit(R("fileAdded"),e),e.ignored)return!1},filesAdded:function(e,t){this.verifyErros.length>0&&F()("#errorModal").modal("show");var s=this;if(F()("#errorModal").on("hidden.bs.modal",function(){s.verifyErros=[]}),this.$emit(R("filesAdded"),e,t),e.ignored||t.ignored)return!1},fileRemoved:function(e){this.updateSubmitEnable(this.fileList.length),this.files=this.uploader.files,this.fileList=this.uploader.fileList},filesSubmitted:function(e,t){this.files=this.uploader.files,this.fileList=this.uploader.fileList,this.autoStart&&this.uploader.upload()},allEvent:function(){for(var e,t=arguments.length,s=Array(t),i=0;i<t;i++)s[i]=arguments[i];var n=s[0],o=(e={},I()(e,"fileAdded",!0),I()(e,"filesAdded",!0),I()(e,"uploadStart","uploadStart"),e)[n];if(o){if(!0===o)return;this[o].apply(this,s.slice(1))}s[0]=R(n),this.$emit.apply(this,s)},verifyUploadName:function(e,t,s,i){if("jpg"!=s&&"wav"!=s&&"mp3"!=s)return"The file type is not valid, accept jpg, wav, mp3.";if(t<2)return"The file name is not valid.";if(e[0]!=i)return"The file name does not correspond to lesson "+i+".";if("jpg"==s)if("background"==e[1]){if(3!=t)return"Background image file name does not comply with spec, use "+e[0]+"background.[sp|tl|tp|sl]"+s+".";if("sl"!=e[2]&&"sp"!=e[2]&&"tl"!=e[2]&&"tp"!=e[2])return"Error: Category must be one of the following: sp, sl, tp, tl, example: 4123.3.0032.sl."}else{if(4==t&&"sl"!=e[3]&&"sp"!=e[3]&&"tl"!=e[3]&&"tp"!=e[3])return"Error: Category must be one of the following: sp, sl, tp, tl, example: 4123.3.0032.sl.";if(4==t){if(4!=e[2].length||isNaN(e[2]))return"Error: Length must be 4 numeric digits MMSS.";if(!/^\d+$/.test(e[2])&&(e[2][1]>5||e[2][3]>5))return"Error: Invalid Offset - must be 4 digits from 0-9 in format MMSS (MM=Minutes, SS=Seconds - example 0032 for 0 Minutes, 32 seconds."}else{if(3!=t)return"Image file name does not comply with spec, use "+e[0]+"."+s+".";if(4!=e[1].length||isNaN(e[1]))return"Error: Length must be 4 numeric digits MMSS.";if("0000"!=e[1])return"Image file name does not comply with spec, use "+e[1]+"."+s+"."}}if("wav"==s||"mp3"==s){if(2!=t&&3!=t)return"Audio file name does not comply with spec, use "+e[0]+"."+s+".";if(3==t&&"0000"!=e[2])return"Audio file name does not comply with spec, use "+e[1]+"."+s+"."}},updateSubmitEnable:function(e){this.submitEnable=e>0},submitFiles:function(){this.isLoading=!0;var e=this.fileList.valueOf(),t=this.filesIntegrityTest(e);if(this.errorModalMsg=t,t&&0!=t.length){var s=this;setTimeout(function(){F()("#errorModal").modal("show"),s.isLoading=!1},1e3)}else{var i=this;setTimeout(function(){i.$router.push("/submission-received/")},1e3)}},filesIntegrityTest:function(e){console.log("fileIntegrityTest : "+e);for(var t={},s=0;s<e.length;s++){var i=this.splitFileName(e[s].name);if(4==i.numGroup||3==i.numGroup&&("MP3"==i.extension.toUpperCase()||"WAV"==i.extension.toUpperCase())){var n=i.splitted[1],o=i.splitted[2],r=i.splitted[3].toUpperCase();n in t||(t[n]={}),o in t[n]||(t[n][o]=[]),t[n][o].push(r)}}return this.checkIntegrityResult(t)},checkIntegrityResult:function(e){var t=$()(e),s="",i=[],n=!0,o=!1,r=void 0;try{for(var a,l=k()(t);!(n=(a=l.next()).done);n=!0){var u=a.value,d=$()(e[u]);e[u]["0000"]&&(e[u]["0000"].includes("WAV")||e[u]["0000"].includes("MP3"))||i.push("No "+this.lessonNumber+"."+u+".0000.wav(mp3) present.");var p=!0,c=!1,f=void 0;try{for(var h,m=k()(d);!(p=(h=m.next()).done);p=!0){var v=h.value;if(1!=e[u][v].length||!e[u][v].includes("WAV")&&!e[u][v].includes("MP3")){this.slidesNumber+=e[u][v].length;var g=[];e[u][v].includes("SP")||g.push(this.lessonNumber+"."+u+"."+v+".sp.jpg"),e[u][v].includes("SL")||g.push(this.lessonNumber+"."+u+"."+v+".sl.jpg"),e[u][v].includes("TP")||g.push(this.lessonNumber+"."+u+"."+v+".tp.jpg"),e[u][v].includes("TL")||g.push(this.lessonNumber+"."+u+"."+v+".tl.jpg"),s="Please also transmit the files ";for(var b=0;b<g.length;b++)g.length>=2&&b==g.length-1?s+=" and "+g[b]:s+=0==b?g[b]:", "+g[b];"Please also transmit the files . ; "!=(s+=". ; ")&&i.push(s)}}}catch(e){c=!0,f=e}finally{try{!p&&m.return&&m.return()}finally{if(c)throw f}}}}catch(e){o=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}return this.$store.state.slidesNumber=this.slidesNumber,i},getSubmissionSurface:function(e){var t=0,s=0,i=this.processListToFiles(e),n=this.evaluateUserFiles(i);if("CONTENT_OK"==n){for(var o=0;o<e.length;o++){"jpg"==this.splitFileName(e[o]).extension?t+=1:s+=1}this.remindMsg="Lesson "+this.lessonNumber+" already has content: One Audio Recap Length "+s+" with "+t+" slides (each in 4 versions) But you can upload additional files below."}else"NO_CONTENT_YET"==n?this.remindMsg="No content exists presently for "+this.lessonNumber+". Please submit your files below:":"CONTENT_INCOMPLETE"==n&&(this.remindMsg="Uploaded content for "+this.lessonNumber+" is incomplete. Please see errors below submission box, and upload missing/corrected files.")},processListToFiles:function(e){console.log("processListToFiles");for(var t=[],s=0;s<e.length;s++){var i=e[s].substring(e[s].lastIndexOf("/")+1),n={};n.name=i,t.push(n)}return t},evaluateUserFiles:function(e){if(console.log("evaluateUserFiles"),e.length<=0)return"NO_CONTENT_YET";var t=this.filesIntegrityTest(e);return t.length>0?(this.MissingFileTitle="Missing Files:",this.uploadedListTitle="Existing Assets:",this.MissingFiles=t,"CONTENT_INCOMPLETE"):(this.uploadedListTitle="Existing Assets:","CONTENT_OK")},getLessonInfo:function(){var e=this,t=this.$store.state.API.getLessonInfo.url+this.lessonNumber;this.$http.get(t).then(function(t){t.data&&(e.lessonTitle='"'+t.data.title+'"')})}},created:function(){var e=this;this.options.initialPaused=!this.autoStart;var t=new P.a(this.options);this.uploader=t,this.uploader.fileStatusText=this.fileStatusText,t.on("catchAll",this.allEvent),t.on("fileAdded",this.fileAdded),t.on("filesAdded",this.filesAdded),t.on("fileRemoved",this.fileRemoved),t.on("filesSubmitted",this.filesSubmitted),this.lessonNumber=this.$route.params.id;var s=this.$store.state.API.getLessonUploadedContent.url+this.lessonNumber;this.$http.get(s).then(function(t){t.data&&(e.userFiles=t.data,e.getSubmissionSurface(e.userFiles),e.getLessonInfo())}).catch(function(t){console.log(t),e.$router.push("/")}),sessionStorage.getItem("store")&&this.$store.replaceState(a()({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",function(){sessionStorage.setItem("store",o()(e.$store.state))})},destroyed:function(){var e=this.uploader;e.off("catchAll",this.allEvent),e.off("fileAdded",this.fileAdded),e.off("filesAdded",this.filesAdded),e.off("fileRemoved",this.fileRemoved),e.off("filesSubmitted",this.filesSubmitted),this.uploader=null},computed:{buttonDisabled:function(){return this.$store.state.submitButtonDisabled}},components:{UploaderBtn:B,UploaderDrop:J,UploaderUnsupport:H,UploaderList:te,UploaderFiles:ne,UploaderFile:Q}},re={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"mt-5"},[e._v("Submission for Lesson "+e._s(e.lessonNumber))]),e._v(" "),s("p",{staticClass:"mt-1"},[e._v(e._s(e.lessonTitle))]),e._v(" "),s("p",{staticClass:"mb-4 mt-1"},[e._v(e._s(e.remindMsg))]),e._v(" "),e._t("default",[s("uploader-unsupport"),e._v(" "),s("uploader-drop",{on:{ondragenter:function(t){e.document.getElementsByClassName("overlay").toggle("overlay_show")}}},[s("div",{staticClass:"uploadContainer mt-4"},[s("i",{staticClass:"fas fa-cloud-upload-alt uploadIcon"}),e._v(" "),s("div",{staticClass:"uploadPageDescription"},[s("div",[e._v("Please Drop your Files here")])])]),e._v(" "),s("div",{staticClass:"overlay"})]),e._v(" "),s("uploader-list"),e._v(" "),s("div",{staticClass:"submitBtn mt-5"},[e.submitEnable?s("button",{staticClass:"btn btn-secondary",attrs:{type:"submit",disabled:e.buttonDisabled},on:{click:e.submitFiles}},[e._v("Submit")]):e._e(),e._v(" "),s("loading",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}})],1),e._v(" "),s("div",{staticClass:"uploadedList"},[s("span",[e._v(e._s(e.MissingFileTitle))]),e._v(" "),e._l(e.MissingFiles,function(t){return s("span",{key:t},[e._v(e._s(t))])}),e._v(" "),s("span",[e._v(e._s(e.uploadedListTitle))]),e._v(" "),e._l(e.userFiles,function(t){return s("span",{key:t},[e._v(e._s(t))])})],2)],{files:e.files,fileList:e.fileList,started:e.started}),e._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"errorModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"verifyErros"},e._l(e.errorModalMsg,function(t){return s("span",{key:t},[e._v(e._s(t))])}),0)]),e._v(" "),e._m(1)])])])],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("i",{staticClass:"fas fa-exclamation-triangle errorIcon"}),this._v(" "),t("h5",{staticClass:"modal-title ml-2",attrs:{id:"exampleModalLabel"}},[this._v("Error")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-secondary okBtn",attrs:{type:"button","data-dismiss":"modal"}},[this._v("OK")])])}]};var ae=s("VU/8")(oe,re,!1,function(e){s("1vG6")},null,null).exports,le={install:de,Uploader:ae,UploaderBtn:B,UploaderDrop:J,UploaderUnsupport:H,UploaderList:te,UploaderFiles:ne,UploaderFile:Q};"undefined"!=typeof window&&window.Vue&&window.Vue.use(de);var ue=le;function de(e){de.installed||(e.component(ae.name,ae),e.component(B.name,B),e.component(te.name,te),e.component(ne.name,ne),e.component(Q.name,Q))}s("K3J8");var pe=s("NYxO");i.a.use(pe.a);var ce=new pe.a.Store({state:{currentLesson:"",slidesNumber:0,uploadCompleted:!1,userFiles:{},API:{submitButtonDisabled:!1,getToken:{url:"https://staging.chinesepod.com/api/v1/token",parameter:{key:"aaaa1111bbbb2222cccc3333",type:"testing"}},getLessonInfo:{url:"https://staging.chinesepod.com/api/v1/lessons/get-lesson/"},getLessonUploadedContent:{url:"https://staging.chinesepod.com/api/v1/recap/get-content/"}},Authorization:{bearerToken:"",userId:""}}}),fe=s("ZZvs"),he=s.n(fe),me=(s("SYh3"),s("ppUw")),ve=s.n(me);i.a.use(ue),i.a.use(E.a,N.a),i.a.use(ve.a),i.a.component("Loading",he.a),i.a.config.productionTip=!1,localStorage.setItem("token","bearer "+ce.state.Authorization.bearerToken);var ge=localStorage.getItem("token");ge&&(i.a.prototype.$http.defaults.headers.common.Authorization=ge),new i.a({el:"#app",router:C,store:ce,components:{App:d},template:"<App/>"}),C.beforeEach(function(e,t,s){e.name==t.name?window.location.reload():s()})},SYh3:function(e,t){},SjJI:function(e,t){},VB5X:function(e,t){},jtPr:function(e,t){},k6xS:function(e,t){},kNIQ:function(e,t){},"q/W4":function(e,t){},uLrf:function(e,t){},vRiw:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bb64248be855343f7331.js.map